<!DOCTYPE html>
<html>
  <head>
    <title>Test Iframe</title>
  </head>
  <body>
    Test Iframe

    <script>
      window.onerror = function () {
        console.log.apply(console, arguments);
      };
    </script>
    <script src="/penpal.js"></script>
    <script>
      const messenger = new Penpal.WindowMessenger({
        remoteWindow: window.parent,
        allowedOrigins: ['*'],
      });

      Penpal.connectToParent({
        messenger,
        timeout: 30,
        log: Penpal.debug('Child'),
      }).promise.then(function (parent) {
        setTimeout(function () {
          parent.reportStillConnected();
        }, 31);
      });
    </script>
  </body>
</html>
