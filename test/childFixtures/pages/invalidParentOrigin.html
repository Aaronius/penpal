<!DOCTYPE html>
<html>
  <head>
    <title>Test Iframe</title>
  </head>
  <body>
    Test Iframe

    <script>
      window.onerror = function () {
        console.log.apply(console, arguments);
      };
    </script>
    <script src="/penpal.js"></script>
    <script>
      const urlParams = new URLSearchParams(window.location.search);
      const invalidParentOrigin = urlParams.get('invalidParentOrigin');

      Penpal.connectToParent({
        parentOrigin: invalidParentOrigin,
      }).promise.catch((error) => {
        window.parent.postMessage(
          {
            errorCode: error.code,
          },
          '*'
        );
      });
    </script>
  </body>
</html>
