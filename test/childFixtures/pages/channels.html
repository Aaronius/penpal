<script src="/penpal.js"></script>
<script src="/pages/_fixtureHelpers.js"></script>
<script>
  let channelBParent;

  const channelBMethods = {
    getChannel() {
      return 'B';
    },
    getChannelFromParent() {
      return channelBParent.getChannel();
    },
  };

  PenpalFixture.connect({
    channel: 'B',
    methods: channelBMethods,
    allowedOrigins: ['*'],
    logLabel: 'Child Connection B',
  }).promise.then((parent) => {
    channelBParent = parent;
  });

  let channelAParent;

  const channelAMethods = {
    getChannel() {
      return 'A';
    },
    getChannelFromParent() {
      return channelAParent.getChannel();
    },
  };

  PenpalFixture.connect({
    channel: 'A',
    methods: channelAMethods,
    allowedOrigins: ['*'],
    logLabel: 'Child Connection A',
  }).promise.then((parent) => {
    channelAParent = parent;
  });
</script>
